<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Implenting the Async and Promises Open the console</h1>
    <script>
    const stock = {
        friuts:['mango','orange','aple'],
        liquid:['water','juice','melon'],
        ingridients:['bredar','chocolate','cocoa'],
        hold:['cup','jar']
    }

//     const order=(call_production)=>{
//         setTimeout(()=>{
//             console.log(`${stock.friuts[1]} has been selected`)
//         },2000)
//         call_production();
//     }

//     const production=()=>{
//         setTimeout(()=>{
//             console.log(`${stock.friuts[1]} has been chopped`)
//             setTimeout(()=>{
//                 console.log(`${stock.liquid[1]}and ${stock.liquid[2]} has been added`)
//                 setTimeout(()=>{
//                     console.log('machine has been started')
//                     setTimeout(()=>{
//                         console.log(`container ${stock.hold[1]} has been selected`)
//                         setTimeout(()=>{
//                             console.log(`${stock.ingridients[1]} has been added`)
//                             setTimeout(()=>{
//                                 console.log('time to serve you')
//                                 setTimeout(()=>{
//                                     console.log('visit again much welcomed')
//                                 },1000)
//                             },2000)
//                         },3000)
//                     },2000)
//                 },1000)
//     },1000)
//     },2000)
//     }
// order(production);


//  ------------------------------------ USING PROMISES-----------------------------------------------

// let shop_is_open = true;
// // RELETION BETWEEN TIME AND WORK
//     let order=(time, work)=>{

//         return new Promise ((resolve, reject)=>{
//             if(shop_is_open){
//                 setTimeout(()=>{
//                     resolve(work())
//                 },time)
//             }
//             else{
//                 reject( console.log("our services are closed"))
//             }
//         });
//     };
//     order(1000, ()=> console.log('hie we recived your order'))
//     //PROMISE CHAINING
// // return keyword is very import in promises followed by the name of the function
        // DONOT USE A COLON AFTER OR BEFORE .THEN

//     .then( ()=>{
//         return order(2000, ()=> console.log(`${stock.friuts[0]} has been selected`))
//     } )
//     .then(()=>{
//         return order(2000, ()=> console.log('productionhas started')) 
//     })
//     .then(()=>{
//         return order(1000,()=> console.log(`${stock.friuts[0]} and ${stock.friuts[1]} has been chopped`))
//     })
//     .then(()=>{
//         return order(3000, ()=> console.log('Machin has been started'))
//     })
//     .then(()=>{
//         return order(1000,()=>console.log(`${stock.liquid[0]} and ${stock.liquid[1]} has been added`))
//     })
//     .then(()=>{
//         return order(2000,()=>console.log(`${stock.hold[1]} has been selected`))
//     })
//     .then(()=>{
//         return order(3000, ()=> console.log(`${stock.ingridients[1]} has been added`))
//     })
//     .then(()=>{
//         return order(1000, ()=>console.log('Ready to be served ENJOY YOUR MEAL'))
//     })
//     .then(()=>{
//         return order(5000, ()=> console.log(`WELCOME ONCES AGAIN`))
//     })
// //ERORR HANDLING
// .catch(()=> console.log('customer left'))// will only work if there is an error

// //THE .FINALLY HANDLER
// //closes the program
// .finally(()=> console.log('Finally the day ended successfully'));




//------------------------------------ ASYNC / AWAIT----------------------------------
// let shop_is_open= true;
// let order = ()=>{

//     return new Promise( (resolve, reject)=>{
//         setTimeout(()=>{
//             resolve(
//                 console.log('What ingredient would you like ?')
//             )
//         },3000)
//     });
// }

// async function Kitchen(){
//     console.log('A')
//     console.log('B')
//     console.log('C')
//     await order();// waits for the answer from the order function but the other process will be running without waiting for it
//     console.log('D')
//     console.log('E')
//     console.log('F')
// }
// Kitchen();


// console.log('washing dishes');
// console.log('Taking orders')
// console.log('cleaning the floor')


//----------------------------EXAMPLE 2---------OF--ASYNC / AWAIT----------------------------------

 let shop_is_open= true;

 function time(ms){

    return new Promise((resolve, reject)=>{
        if(shop_is_open){
            setTimeout(resolve, ms)
        }else{
            reject(console.log('Shop is closed'))
        }
    })
}
async function kitchen(){
        try{
            await time(2000);
            console.log(`${stock.friuts[1]} has been selected`)

            await time(3000)
            console.log('production has started')

            await time(2000)
            console.log(`${stock.liquid[2]} and ${stock.liquid[1]} has been added`)

            await time(1000)
            console.log('machine has been started')

            await time(3000)
            console.log(`${stock.ingridients[0]} has been added`)

            await time(2000)
            console.log(`${stock.hold[1]} was selected`)

            await time(4000)
            console.log('it has been served')
        }
        catch(error){
            console.log('Not open', error)// runs when there is error
        }
        finally{
            console.log('successfull day')// runs in both cases
        }
    }
    kitchen();







</script>
    
</body>
</html>